<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>DurationHelper</title>
    <style type="text/css">
          body {
              font-family: Verdana, Geneva, Tahoma, sans-serif;
          }
    </style>
  </head>
  <body>
    <h1>DurationHelper</h1>
    <p>DurationHelper is a .NET Standard library that does its best to
      determine the duration of a video when given its URL.<br>
    </p>
    <p>Supported formats:<br>
    </p>
    <ul>
      <li>MP4</li>
      <li>HLS video-on-demand (VOD)</li>
      <li>YouTube</li>
      <li>Vimeo</li>
    </ul>
    <p>To extract the duration of an MP4 file, the moov atom, which
      contains duration info, must be in the first 256 bytes of the
      file.<br>
    </p>
    <ul>
    </ul>
    <p>DurationHelper can also extract the ID and start, end, and
      autoplay parameters from a YouTube URL. Full (<tt>youtube.com</tt>)
      and short (<tt>youtu.be</tt>) URLs are supported.<br>
    </p>
    <hr width="100%" size="2">
    <h2>Usage</h2>
    <h3>Duration.GetAsync<br>
    </h3>
    <p><tt>async Task&lt;TimeSpan?&gt; Duration.GetAsync(Uri uri, string
        youTubeKey = null)</tt><br>
    </p>
    <p>Find the duration of a video from its URL. This function can
      throw several exceptions if the process fails, but it can also
      return null if the process succeeds and the duration simply can't
      be determined.<br>
    </p>
    <p>Parameters:<br>
    </p>
    <ul>
      <li><b>url</b>: A public URL pointing to an MP4, HLS, YouTube, or
        Vimeo video</li>
      <li><b>youTubeKey</b>: A YouTube Data API v3 key. If not provided,
        all YouTube URLs will return a duration of null, as if they were
        not recognized.</li>
    </ul>
    <p>Returns the duration, or null if the duration could not be
      determined.<br>
    </p>
    <h3>YouTube.ParseUrl</h3>
    <p><tt>YouTubeUrlInfo ParseUrl(Uri url)</tt><br>
    </p>
    <p>Extract a YouTube ID and a few parameters from a YouTube URL.<br>
    </p>
    <p>Parameters:<br>
    </p>
    <ul>
      <li>url: The YouTube URL (youtube.com or youtu.be)</li>
    </ul>
    <p>Returns information extracted from the URL:<br>
    </p>
    <pre>struct YouTubeUrlInfo {<br>&nbsp;&nbsp;&nbsp; public string id;<br>&nbsp;&nbsp;&nbsp; public int? start;<br>    public int? end;<br>&nbsp;&nbsp;&nbsp; public bool autoplay;<br>}<br></pre>
    <p>Other functions are available - see the source code for more
      details.<br>
    </p>
    <hr width="100%" size="2">
    <h2><a href="api.html">Azure Functions API</a></h2>
    <p>The source code to DurationHelper includes an Azure Functions
      project. If the application you're working on doesn't use .NET,
      you could deploy this project to your Azure account (using a
      Consumption plan) and access it over HTTP.<br>
    </p>
    <p>Click the link above to try out the API. (The demo server has
      usage limits set, so it might not be running at any given time.)<br>
    </p>
  </body>
</html>
